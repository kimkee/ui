<!doctype html> 
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link href="../../img/common/favicon.ico" rel="shrtcut icon">
	<title>JS</title>
</head>
<body style="background-color: #444444; color:#999999;">
	<ul>
		<li class="on"><a href="javascript:;">kk</a></li>
		<li><a href="javascript:;">kk</a></li>
	</ul>
	<ul>
		<li><a href="javascript:;">kk</a></li>
		<li><a href="javascript:;">kk</a></li>
		<li><a href="javascript:;">kk</a></li>
		<li><a href="javascript:;">kk</a></li>
		<li><a href="javascript:;">kk</a></li>
	</ul>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p><p>d</p>
	<div class="anims">d</div>
	<style>
		.anims{transition: all 0.4s; height: 44px; background-color: #999999; width: 100%;}
		.anims.on{height: 100px; width: 50%;}
	</style>
	<script>

		function scrollTo(element, to, duration) {
			if (duration < 0) return;
			var difference = to - element.scrollTop;
			var perTick = difference / duration * 2;
			console.log(element  , perTick);

			setTimeout(function() {
				element.scrollTop = element.scrollTop + perTick;
				scrollTo(element, to, duration - 2);
			}, 10);
		}

		document.querySelector('.anims').onclick = function () {
			scrollTo(document.querySelector("html"), 0, 50);
		};


		/* 		
		document.querySelectorAll("ul").forEach((ul,i)=>{
			i++;
			ul.classList.add("ul"+i);
			ul.querySelectorAll("li").forEach( (li,i) => {
				i++
				li.classList.add("m"+i);
				// console.log(  li.hhh() );
				if ( li.classList.contains("on") ) {
					
					li.querySelectorAll("a").forEach( a => a.style.backgroundColor = "red");
				}
			});
		});
 		*/
		var $ = function(els){
			
			var result = [];
			document.querySelectorAll(els).forEach(function(ddd){
				// console.log(ddd);
				result.push(ddd)
			});
			// console.log(result);
			return result;
			
			
		}


		Element.prototype.addClass = function(cls){
			var el = this;
			var arr = cls.trim().split(" ");
			console.log( arr );
			for (var i = 0; i < arr.length; i++) {
				el.classList.add(arr[i]);
			}
		};
		Element.prototype.removeClass = function(cls){
			var el = this;
			var arr = cls.trim().split(" ");
			console.log( arr );
			for (var i = 0; i < arr.length; i++) {
				el.classList.remove(arr[i]);
			}
		};
		Element.prototype.toggleClass = function(cls) {
			var el = this;
			var arr = cls.split(" ");
			console.log(arr);
			for (var i = 0; i < arr.length; i++) {
				el.classList.toggle(arr[i]);
			}
		}
		Element.prototype.appendHtml = function(str){
			var div = document.createElement("div");
			div.innerHTML = str;
			while (div.children.length > 0) {
				console.log(div.children);
				this.appendChild( div.children[0] );
				// this.prepend( div.children[0] );
			}
		}
		Element.prototype.html = function(str){
			// console.log(this);
			if (str == undefined) {
				return this.innerHtml;
			}else{
				this.innerHTML = str;
				return str;
			}
		}
		Element.prototype.unwrap = function(){
			console.log(this.parentElement, this.parentElement.childNodes );
			this.parentElement.replaceWith( ...this.parentElement.childNodes );
		}
		Element.prototype.is = function(opt){
			console.log(this , opt);
			if (opt == ":visible") {
				return !!(  this.offsetWidth || this.offsetHeight || this.getClientRects().length )
			}
			if (opt == ":hidden") {
				return !!!( this.offsetWidth || this.offsetHeight || this.getClientRects().length )
			}
		}
		Element.prototype.index = function(){ /* document.querySelector("li.m5").index(); */
			var child = this.parentNode.childNodes;
			var num = 0;
			for(var i = 0; i < child.length; i++){
				if( child[i] == this ) return num;
				if( child[i].nodeType == 1 ) num++;
			}
			return -1;
		}
		Element.prototype.siblings = function(opt){
			console.log(opt);
			const el = this;
			const children = el.parentElement.children;
			const tempArr = [];
			for(let i = 0; i < children.length; i++) {    
				tempArr.push(children[i]);
			}
			return tempArr.filter(function(e){
				return e != el;
			});
		}
		

		// document.querySelector("ul").addClass(" aa s ");
		console.log( $("ul") ); 
		$("ul").forEach(function(els,idx){
			// console.log( els );
			els.querySelectorAll("li").forEach(function(el,id){
				id++;
				el.addClass("m"+id);
			});
		})
		
		document.querySelector('html').toggleClass("open");
		// document.querySelector('.anims').animate(
		// 	[
		// 		{ 
		// 			transform: 'translateX(0px)',
		// 			opacity:"0"
		// 		},
		// 		{
		// 			transform: 'translateX(100px)',
		// 			opacity:"1"
		// 		},
		// 		{
		// 			transform: 'translateX(0px)',
		// 			opacity:"0"
		// 		},
		// 	], {
		// 		// timing options
		// 		duration: 2000,
		// 		iterations: Infinity
		// 	}
		// );
		
		// document.querySelector('.anims').animate({ 
		// 	transform: 'translateX(100px)'
		// },2000);
		const anims = document.querySelector(".anims");

		anims.addEventListener("click", e => e.target.classList.toggle("on") );

		anims.addEventListener("transitionend", e => {
			if( e.propertyName == "height" ){
				console.log(e.propertyName+' - Animation ended');
			}
		});

		visualViewport.addEventListener("resize", e => console.log( e, visualViewport.height ) );
		window.addEventListener("load", e => console.log( visualViewport.height ) );
	</script>


	<script>
		/* $(this).addClass("active").siblings("li").removeClass("active"); */
        document.querySelectorAll(".btn.sm").forEach(li => {
            li.addEventListener("click", () => {
                li.classList.add("active");
                [...li.parentNode.children].filter(sibling => sibling !== li)
                .forEach(sibling => sibling.classList.remove("active"));
            });
        });


        /*  $(".box").unwrap() */
        document.querySelectorAll(".box").forEach(box => {
            const pElm = box.parentElement;
            while (box.firstChild) {
                pElm.insertBefore(box.firstChild, box);
            }
            pElm.removeChild(box);
        });

        /* $(".box").wrap(`<div class="www"></div>`) */
        document.querySelectorAll(".box").forEach(box => {
            const wrap = document.createElement("div");
            wrap.classList.add("www");
            box.parentNode.insertBefore(wrap, box);
            wrap.appendChild(box);
        });


        // $("body,html").animate({ scrollTop: 0 }, 200, function() {
        //         console.log("도착")
        // });
        const scrollToPosition = (selector, position, duration, callback) => {
            const element = document.querySelector(selector);
            if (!element) return;

            const startingYOffset = element.scrollTop || document.documentElement.scrollTop;
            const targetYOffset = position;
            const startTime = performance.now();

            const animateScroll = (timestamp) => {
                const currentTime = timestamp - startTime;
                const progress = Math.min(currentTime / duration, 1);
                const easeInOutCubic = progress < 0.5 ? 4 * progress * progress * progress : (progress - 1) * (2 * progress - 2) * (2 * progress - 2) + 1;
                const yOffset = startingYOffset + (targetYOffset - startingYOffset) * easeInOutCubic;

                if (element === document.body) {
                    window.scrollTo(0, yOffset);
                } else {
                    element.scrollTop = yOffset;
                }

                if (currentTime < duration) {
                    requestAnimationFrame(animateScroll);
                } else {
                    if (typeof callback === 'function') {
                        callback();
                    }
                }
            };

            requestAnimationFrame(animateScroll);
        };

        // 예시로 body와 .box 영역을 동시에 스크롤하여 100px 지점으로 이동하는 코드
        /* scrollToPosition(document.body, 100, 200, () => {
            console.log("body 도착");
        });

        const boxElement = document.querySelector(".box");
        scrollToPosition(boxElement, 100, 200, () => {
            console.log(".box 도착");
        }); */
	</script>



<!-- 
	<style>
	.droptarget { float: left; width: 100px; height: 35px; margin: 15px; padding: 10px; border: 1px solid #aaaaaa; }
	</style>


	<p>Drag the p element back and forth between the two rectangles:</p>

	<div class="droptarget" ondrop="drop(event)" ondragover="allowDrop(event)">
	<p ondragstart="dragStart(event)" ondrag="dragging(event)" draggable="true" id="dragtarget">Drag me!</p>
	</div>

	<div class="droptarget" ondrop="drop(event)" ondragover="allowDrop(event)"></div>

	<p style="clear:both;"><strong>Note:</strong> drag events are not supported in Internet Explorer 8 and earlier versions or Safari 5.1 and earlier versions.</p>

	<p id="demo"></p>

	<script>
	function dragStart(event) {
		event.dataTransfer.setData("Text", event.target.id);
	}

	function dragging(event) {
		document.getElementById("demo").innerHTML = "The p element is being dragged";
	}

	function allowDrop(event) {
		event.preventDefault();
	}

	function drop(event) {
		event.preventDefault();
		var data = event.dataTransfer.getData("Text");
		event.target.appendChild(document.getElementById(data));
		document.getElementById("demo").innerHTML = "The p element was dropped";
	}
	</script>

 -->
</body>
</html>
