<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=720, initial-scale=1.0">
    <link href="../../img/common/favicon.ico" rel="shrtcut icon">
    <title>KH</title>
    <link rel="stylesheet" href="./kh.css">
</head>
<body>
    <div class="keypad">
        <ul class="pad"></ul>
    </div>
    <div class="wrap">
        <include src="./menu.html" data-include-opt='{" class":" menu mm", " tit ":"Î©îÎâ¥", "value":" dd ", "count":"false"}'></include>
        <include src="./fram.html" data-include-opt='{"class":"list", "tit":"Ï†úÎ™©", "data-ui":"dd"}'></include>
        <include src="./inc2.html" data-include-opt='{"class":" fff", "display":"none"}'></include>
    </div>
<script> 
const ia = {
    init: function () {
        this.menu.init();
    },
    menu: {
        init:function(){
            this.set();
        },
        set:function(){
            const tbl = new Object;
            const loctxt = "../guide/";
            let tot = 0;
            function appendHtml(el, str) {
                var div = document.createElement('div');
                div.innerHTML = str;
                while( div.children.length > 0 ){ el.appendChild(div.children[0]); }
            }
            document.querySelectorAll("ul").forEach((ul, i) => {
                i++;
                ul.classList.add("ul" + i);
                utit = ul.getAttribute("tit");
                console.log(utit);
                tbl[utit] = [];
                ul.querySelectorAll("li").forEach((li, idx) => {
                    idx++;
                    tot++;
                    li.classList.add("m" + idx);
                    const btn = li.querySelector("a");
                    const fnm = btn.getAttribute("href").replace(loctxt, "");
                    const tit = li.querySelector("i").getAttribute("tit");
                    tbl[ utit ].push( tit );
                    btn.setAttribute("class", "lk");
                    btn.innerHTML = fnm;
                    btn.setAttribute("href", loctxt + fnm + "");
                    btn.setAttribute("target", "_blank");
                    appendHtml( li, '<a class="dk" href="#">D</a>');
                    li.querySelector(".dk").setAttribute("href", loctxt + fnm + "?dark=true");
                });
            });
            console.table(tbl);
            console.table("Ï†ÑÏ≤¥" + tot);

            let glink = localStorage.getItem("glink");

            const title = document.querySelector(".title");
            const nlink = document.querySelector(".link-now");
            const ntext = document.querySelector("input.now");
            const glbts = document.querySelectorAll(".sect a");
            const iframe = document.querySelector(".iframe");

            const mClick = (el, opt) => {
                var ilk = el.getAttribute("href");
                opt ? window.open(ilk, "_blank") : setLink(ilk);
            };

            glbts.forEach( el => {
                el.addEventListener("click", e => {
                    const opt = e.ctrlKey ? true : false ;
                    mClick(el, opt)
                    e.preventDefault();
                });
            });

            const setLink = glink => {
                if (glink == null) { glink = loctxt + "../guide/ui.html" }; nlink.setAttribute("href", glink);
                nlink.innerHTML = glink.replace("../guide/", "");
                ntext.value = glink.replace("../guide/", "");
                ntext.style.width = ntext.scrollWidth / 10+"rem";
                iframe.setAttribute("src", glink);
                localStorage.setItem("glink", glink);
            }
            setLink(glink);
            ntext.addEventListener("focus", e => e.target.select())

            const setActive = e => {
                const glk = localStorage.getItem("glink");
                const lks = document.querySelectorAll("a");
                lks.forEach( link => glk == link.getAttribute("href") ? link.classList.add("active") : link.classList.remove("active") );
                title.innerHTML = document.myframe.window.document.title;
                console.log(glink, document.myframe.window.document.title);
            }
            iframe.addEventListener("load", e => setActive() );

            /* iframe size */
            const ifrm = document.querySelector(".ifr.sect");
            ifrm.addEventListener("click", e => e.target.className == "time" ? ifrm.classList.toggle("w320") : null );
            ifrm.addEventListener("transitionend", e => e.propertyName == "width" ? console.log( e.propertyName ) : null );
            
            /* ÏãúÍ≥Ñ */
            const clock = document.querySelector(".time");
            const dgit = n => n < 10 ? "0"+n : n;
            const ampm = n => n > 12 ? "PM "+ dgit( n-12 ) : "AM "+ dgit(n);
            const setT = n => {
                const date = new Date();
                const time = ampm( date.getHours() ) +":"+ dgit( date.getMinutes() +":"+ dgit( date.getSeconds() ));
                clock.innerText = time;
            }
            setInterval(setT, 1000);
        },
    },
    html: {
        init: function(){
            this.set();
        },
        load: function (paramCallback) {
            this.loadCallback = paramCallback; 
        },
        set: function(){
            const incd = document.querySelectorAll("include");
            incd.length ? this.each(incd) : this.acti();
        },
        each: function(incd){ 
            const _this = this;
            const inum = incd.length;
            let cout = 0;
            incd.forEach( els => {
                const url = els.getAttribute("src");
                const opt = JSON.parse(els.getAttribute("data-include-opt")) || {};
                const obj = {};
                Object.keys(opt).forEach( k => obj[k.trim()] = opt[k].trim() );
                _this.fetch = fetch(url)
                .then( res => res.ok ? res.text() : null )
                .then( res => { 
                    cout++;
                    els.innerHTML = res;
                    console.log(url, obj, cout+"/"+inum);
                    const elc = els.firstElementChild;
                    /* attr */
                    for(const key in obj){
                        const sxt = ( key != "class" && key != "display" && elc ) ;
                        sxt ? elc.setAttribute( key, obj[key] ) : null ;
                    }
                    /* display */
                    elc && obj.display ? elc.style.display = obj.display : null;
                    /* class */
                    const cls = elc && obj.class ? obj.class.split(" ") : null;
                    for(const c in cls) elc.classList.add( cls[c] );
                    /* unwrap */
                    els.replaceWith( ...els.childNodes );
                    cout == inum ? _this.acti() : null;
                });
            });
        },
        acti: function(){
            this.comp = true;
            this.call();
        },
        call: function(){
            typeof this.loadCallback == "function" ? this.loadCallback(): null ;
        }
    }
}; 

window.addEventListener("load", e => {
    if( typeof ia.html  == "undefined" ) {
        ia.init();
        console.log("ia.init(); Î°úÎìú ÏôÑÎ£å");
    }else{
        ia.html.set();
        ia.html.times = setInterval( e => {  /* console.log("times" ,  ia.html.comp); */
            if (ia.html.comp) {
                clearInterval(ia.html.times);
                ia.init();
                console.log("ia.init(); Î°úÎìú ÏôÑÎ£å");
            }
        });
    }
});
</script>

<script data-discript="Î∞∞Ïó¥ÏöîÏÜåÎΩëÍ∏∞">
const arrs = [1,2,3,4,5,6,7,8,9,10];
const game = cc => {
    let rdom = e => Math.floor( Math.random() * arrs.length );
    let prnt = t => console.log(t, rr, arrs);
    let rr = arrs.splice( rdom() , 1); /* ÏÑûÍ∏∞ */
    rr == cc ? prnt("üëç") : prnt("ü§¢");
};
game(3);
</script>

<script data-discript="ÌÇ§Ìå®ÎìúÏÑûÍ∏∞">
const kset = cc => {
    const kpad = document.querySelector(".keypad .pad");
    const norg = [0,1,2,3,4,5,6,7,8,9];
    const nums = [...norg];
    const rdom = e => Math.floor( Math.random() * nums.length );
    const choc = e => nums.splice( rdom() , 1);
    let btn = '';
    let bn = '';
    let bx = '<button type="button" value="delete" class="bt bt-del">X</button>';
    let bc = '<button type="button" value="clear" class="bt bt-clr">Clear</button>';
    for(let i in norg ) {
        let pp = choc(); /* ÎΩëÍ∏∞ */
        let bt = '<button type="button" value="'+pp+'" class="bt">'+pp+'</button>';
        console.log(i , pp , nums);
        i == 8  ? bn = bc : null ; 
        i == 9  ? bn = bx : null ;        
        btn += bt + bn;
    }
    kpad.innerHTML = btn;
};
kset();
</script>

<style>
.keypad{ background-color: #dddddd;width: 100%;}
.keypad .pad{width: 100%;  max-width: 100%; display: flex; flex-wrap: wrap;  padding: 0; margin: 0px;}
.keypad .pad .bt{width: calc(100% / 3 + 1px ); height: 4rem; margin: -1px 0px 0px -1px;background-color: #333333; border: 1px solid #000000; color: #999999; }
.keypad .pad .bt:hover{background-color: #222222;}
.keypad .pad .bt:active{background-color: #111111;}
</style>

</body>
</html>
