<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="../img/common/favicon.ico" rel="shrtcut icon">
	<title>KH</title>
	<link rel="stylesheet" href="./kh.css">
</head>
<body>
	<div class="wrap">
		<section class="sect 1st">
			<ul tit="UI">
				<li><a href="/static/html/guide/ui.html"></a>		<i tit="UI">,</i></li>
				<li><a href="/static/html/guide/index.html"></a>	<i tit="React">,</i></li>
				<li><a href="/static/html/guide/index2.html"></a>	<i tit="React">,</i></li>
			</ul>
			<ul tit="List">
				<li><a href="/static/html/guide/spin3.html"></a>	<i tit="스핀3">,</i></li>
				<li><a href="/static/html/guide/lottie.html"></a>	<i tit="로티">,</i></li>
			</ul>
		</section>
		<section class="sect ifr">
			<div class="urls">
				<em class="time"></em>
				<em class="title"></em>
				<a href="#none" class="link-now"></a>
			</div>
			<div class="box">
				<iframe src="" class="iframe" id="myframe" name="myframe" frameborder="0" scrolling="auto" crossorigin></iframe>
			</div>
			<div class="bts">
				<a href="/static/html/guide/ui.html" class="bt bt-f">F</a>
			</div>
		</section>
	</div>
	<script>
		/* 김기현 */
		const tbl = new Object;
		const loctxt = "";
		let num = 0;
		function appendHtml(el, str) {
			var div = document.createElement('div');
			div.innerHTML = str;
			while (div.children.length > 0) {
				el.appendChild(div.children[0]);
			}
		}
		document.querySelectorAll("ul").forEach((ul, i) => {
			i++;
			ul.classList.add("ul" + i);
			//console.log(ul.getAttribute("tit"));
			tbl[ul.getAttribute("tit")] = [];

			ul.querySelectorAll("li").forEach((li, idx) => {
				li.querySelectorAll("a").forEach((link, idx) => {
					const fname = link.getAttribute("href").replace(loctxt, "");
					idx++;
					link.setAttribute("class", "lk");
					link.innerHTML = fname;
					link.closest("li").classList.add("m" + idx);
					link.setAttribute("href", loctxt + fname + "");
					link.setAttribute("target", "_blank");
					// console.log( "m"+idx+"=", fname);
					num++;
					tbl[ul.getAttribute("tit")].push(li.querySelector("i").getAttribute("tit"));
					appendHtml(link.closest("li"), '<a class="dk" href="#">D</a>');
					link.closest("li").querySelector(".dk").setAttribute("href", loctxt + fname + "?dark=true");
					// link.closest("li").prepend(btdark);
				});
			});
		});
		console.table(tbl);
		console.table("" + num);

		let glink = localStorage.getItem("glink");

		const title = document.querySelector(".title");
		const nlink = document.querySelector(".link-now");
		const alink = document.querySelectorAll("a");
		const iframe = document.querySelector(".iframe");

		function mclick(el) {
			var ilk = el.getAttribute("href");
			setLink(ilk);
		};
		function mDbl(el) {
			var ilk = el.getAttribute("href");
			window.open(ilk, "_blank");
		};
		function setLink(glink) {
			if (glink == null) { glink = loctxt + "/static/html/guide/ui.html" }; nlink.setAttribute("href", glink);
			nlink.innerHTML = glink.replace("../html/", "");
			iframe.setAttribute("src", glink);
			localStorage.setItem("glink", glink);
		}
		document.getElementById('myframe').onload = function () {
			title.innerHTML = document.myframe.window.document.title;
			console.log(glink, document.myframe.window.document.title);
			setActive(glink);
		}
		alink.forEach((el, idx) => {
			el.addEventListener("click", (e) => {
				e.ctrlKey ? mDbl(el) : mclick(el); 
				console.log( e.ctrlKey );
				e.preventDefault();
			});
		});
		setLink(glink);
		function setActive(glink){
			const glk = localStorage.getItem("glink");
			document.querySelectorAll("a").forEach((link) => {
				const mylink = link.getAttribute("href");
				if( glk == mylink){
					link.classList.add("active");
				}else{
					link.classList.remove("active");
				}
			});
			console.log("setActive()" , glk);
		}
	</script>
	<script>
		document.querySelector(".sect.ifr .urls .time").addEventListener("click", (el) => {
			console.log(document.querySelector(".ifr.sect").classList.value.includes("w320"));
			if (document.querySelector(".ifr.sect").classList.value.includes("w320")) {
				document.querySelector(".ifr.sect").classList.remove("w320");
			} else {
				document.querySelector(".ifr.sect").classList.add("w320");
			}
		});
	</script>
	<script>
		setInterval(() => {
			setTm();
		}, 5000);
		function setTm() {
			var date = new Date();
			var hh = date.getHours();
			var mm = date.getMinutes();
			var pm = "";
			hh > 12 ? pm = "PM " : pm = "AM ";
			hh > 12 ? hh = (hh - 12) : hh;
			hh < 10 ? hh = "0" + (hh) : hh;
			mm < 10 ? mm = "0" + (mm) : mm;
			var time = hh + ":" + mm;
			// console.log(time);
			document.querySelector(".time").innerHTML = pm + time + "";
		}
		setTm();
	</script>
</body>

</html>